webpackJsonp([20],{STSY:function(e,t,n){"use strict";t.b=function(e){return Object(i.a)({url:"/role/findList",method:"post",data:e})},t.d=function(e){return Object(i.a)({url:"/role/saveRoleMenu",method:"post",data:e})},t.c=function(e){return Object(i.a)({url:"/role/save",method:"post",data:e})},t.a=function(){return Object(i.a)({url:"/role/getAllRole",method:"post"})};var i=n("vLgD")},bUp0:function(e,t,n){"use strict";t.b=function(){return Object(i.a)({url:"/menu/getMenuTree",method:"post"})},t.c=function(e){return Object(i.a)({url:"/menu/save",method:"post",data:e})},t.a=function(e){return Object(i.a)({url:"/menu/deleteMenu",method:"post",params:{menuId:e}})};var i=n("vLgD")},tiUO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("woOf"),a=n.n(i),l=n("bUp0"),o=n("STSY"),r={created:function(){this.getList()},data:function(){return{dialogFormVisible:!1,loading:!1,treeDialog:!1,treeLoading:!1,role_dialog_title:"",menuList:[],total:null,roleMenu:{id:"",vo:{menuIdList:[]}},listQuery:{current:1,size:20,condition:{name:void 0}},roleList:[],role:{id:"",name:"",enname:"",useable:"1",createBy:this.$store.getters.userInfo.id,updateBy:this.$store.getters.userInfo.id},defaultProps:{children:"children",label:function(e,t){return e.meta.title},id:"id"}}},methods:{getList:function(){var e=this;this.loading=!0,Object(o.b)(this.listQuery).then(function(t){var n=t.data;0===n.code&&"success"===n.msg&&(e.roleList=n.datas.records,e.total=n.datas.total,e.loading=!1)}).catch(function(t){e.loading=!1})},openRoleDialog:function(e){"新建角色"===e?(this.resetForm(),this.role_dialog_title=e,this.dialogFormVisible=!0):(this.role_dialog_title="编辑角色",this.dialogFormVisible=!0,this.role=a()({},e))},save:function(){var e=this;Object(o.c)(this.role).then(function(t){var n=t.data;0===n.code&&"success"===n.msg&&(e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.getList()),e.dialogFormVisible=!1}).catch(function(t){e.dialogFormVisible=!1})},openTreeDialog:function(e,t){var n=this;this.roleMenu.id=e,this.roleMenu.vo.menuIdList=t,this.treeLoading=!0,this.treeDialog=!0,Object(l.b)().then(function(e){var i=e.data;0===i.code&&"success"===i.msg&&(n.menuList=i.data),n.$refs.tree.setCheckedKeys(t),n.menuIdList=t,n.treeLoading=!1})},handleSizeChange:function(e){this.listQuery.size=e,this.getList()},handleCurrentChange:function(e){this.listQuery.current=e,this.getList()},handleFilter:function(){this.listQuery.current=1,this.getList()},makeSureParent:function(e){var t=this;e?(this.roleMenu.vo.menuIdList=this.$refs.tree.getCheckedKeys(),Object(o.d)(this.roleMenu).then(function(e){var n=e.data;0===n.code&&"success"===n.msg&&(t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),t.getList()),t.treeDialog=!1}).catch(function(e){t.loading=!1})):(this.$refs.tree.setCheckedKeys([]),this.treeDialog=!1)},resetForm:function(){this.role={name:"",enname:"",useable:"1"}}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"角色名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.condition.name,callback:function(t){e.$set(e.listQuery.condition,"name",t)},expression:"listQuery.condition.name"}}),e._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.openRoleDialog("新建角色")}}},[e._v("添加")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.roleList,"element-loading-text":"给我一点时间",border:"",fit:""}},[n("el-table-column",{attrs:{type:"index",align:"center",label:"序号"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"角色名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"英文名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.enname))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:1==t.row.useable?"success":"danger"}},[e._v(e._s(1==t.row.useable?"正常":"禁用"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建人"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.vo.createUserName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建时间",sortable:"",prop:"createDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("parseTime")(t.row.createDate,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建时间",sortable:"",prop:"createDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("parseTime")(t.row.updateDate,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.openTreeDialog(t.row.id,t.row.vo.menuIdList)}}},[e._v("菜单")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.openRoleDialog(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"}},[e._v("删除")])]}}])})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"","current-page":e.listQuery.current,"page-size":e.listQuery.size,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"current",t)}}})],1),e._v(" "),n("el-dialog",{attrs:{title:e.role_dialog_title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"role",staticStyle:{width:"400px","margin-left":"50px"},attrs:{"status-icon":"",model:e.role,size:"small","label-position":"left","label-width":"90px"}},[n("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[n("el-input",{model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"英文名称",prop:"enname"}},[n("el-input",{model:{value:e.role.enname,callback:function(t){e.$set(e.role,"enname",t)},expression:"role.enname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"英文名称",prop:"useable"}},[n("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.role.useable,callback:function(t){e.$set(e.role,"useable",t)},expression:"role.useable"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("创 建")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"菜单权限",visible:e.treeDialog,width:"300px"},on:{"update:visible":function(t){e.treeDialog=t}}},[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",attrs:{"check-strictly":"","default-expanded-keys":e.roleMenu.vo.menuIdList,data:e.menuList,"show-checkbox":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.makeSureParent(!1)}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.makeSureParent(!0)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},u=n("VU/8")(r,s,!1,null,null,null);t.default=u.exports}});