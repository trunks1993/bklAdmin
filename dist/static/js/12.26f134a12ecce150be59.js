webpackJsonp([12],{I1kX:function(e,t,a){var r=a("Wi4W");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("584b4e14",r,!0)},STSY:function(e,t,a){"use strict";t.b=function(e){return Object(r.a)({url:"/role/findList",method:"post",data:e})},t.d=function(e){return Object(r.a)({url:"/role/saveRoleMenu",method:"post",data:e})},t.c=function(e){return Object(r.a)({url:"/role/save",method:"post",data:e})},t.a=function(){return Object(r.a)({url:"/role/getAllRole",method:"post"})};var r=a("vLgD")},Wi4W:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-radio+.el-radio[data-v-6e6e6d92] {\n  margin-left: 0;\n}\n.el-radio[data-v-6e6e6d92] {\n  margin: 0 30px 10px 0;\n}\n\n",""])},mtmd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("vMJZ"),s=a("STSY"),l=a("cAgV"),n=a("Wxq9"),o=a("E4LH"),i={directives:{waves:l.a},data:function(){var e=this;return{loading:!1,roleLoading:!1,total:null,listQuery:{current:1,size:20,condition:{name:void 0,phone:void 0,createBy:this.$store.getters.userInfo.id,vo:{roleName:""}}},options:n.regionData,user:{username:null,password:null,checkPass:null,name:null,address:[],addressDetail:"",phone:null,photo:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",createBy:this.$store.getters.userInfo.id,expireDate:0,balance:0,vo:{stock:0,roleId:""}},userList:[],roleList:[],dialogFormVisible:!1,rules:{"vo.roleId":[{required:!0,message:"角色不能为空",trigger:"blur"}],username:[{required:!0,validator:o.d,trigger:"blur"}],password:[{required:!0,validator:function(t,a,r){a?(""!==e.rules.checkPass&&e.$refs.user.validateField("checkPass"),r()):r(new Error("请输入密码"))},trigger:"blur"}],checkPass:[{required:!0,validator:function(t,a,r){a?a!==e.user.password?r(new Error("两次输入密码不一致!")):r():r(new Error("请再次输入密码"))},trigger:"blur"}],phone:[{required:!0,validator:o.c,trigger:"blur"}],name:[{required:!0,message:"用户名不能为空",trigger:"blur"}],address:[{required:!0,message:"地址不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(r.q)(this.listQuery).then(function(t){var a=t.data;0===a.code&&"success"===a.msg&&(e.userList=a.datas.records,e.total=a.datas.total,e.loading=!1)}).catch(function(t){e.loading=!1})},handleFilter:function(){this.listQuery.current=1,this.getList()},handleSizeChange:function(e){this.listQuery.size=e,this.getList()},handleCurrentChange:function(e){this.listQuery.current=e,this.getList()},handleRadioChange:function(e){31536e6===e?(this.user.balance=500,this.user.vo.stock=500):(this.user.balance=0,this.user.vo.stock=0)},handlerRoleChange:function(){this.getList()},openUserDialog:function(){var e=this;this.dialogFormVisible=!0,this.roleLoading=!0,Object(s.a)().then(function(t){var a=t.data;0===a.code&&"success"===a.msg&&(e.roleList=a.data),e.roleLoading=!1})},createUser:function(){var e=this;this.$refs.user.validate(function(t){if(!t)return!1;e.user.expireDate=e.user.expireDate?e.user.expireDate+Date.now():"";var a=_.cloneDeep(e.user);a.address=a.address.toString(),a.balance*=100,Object(r.e)(a).then(function(t){var a=t.data;0===a.code&&"success"===a.msg&&(e.dialogFormVisible=!1,e.loading=!0,e.getList(),e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}))})})},resetForm:function(e){this.$refs[e].resetFields()}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"用户名"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.condition.name,callback:function(t){e.$set(e.listQuery.condition,"name",t)},expression:"listQuery.condition.name"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"电话"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.condition.phone,callback:function(t){e.$set(e.listQuery.condition,"phone",t)},expression:"listQuery.condition.phone"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:e.openUserDialog}},[e._v("添加")]),e._v(" "),a("el-radio-group",{staticStyle:{"margin-left":"20px"},on:{change:e.handlerRoleChange},model:{value:e.listQuery.condition.vo.roleName,callback:function(t){e.$set(e.listQuery.condition.vo,"roleName",t)},expression:"listQuery.condition.vo.roleName"}},[a("el-radio",{attrs:{label:""}},[e._v("所有用户")]),e._v(" "),a("el-radio",{attrs:{label:"管理员"}},[e._v("管理员")]),e._v(" "),a("el-radio",{attrs:{label:"商户"}},[e._v("商户")]),e._v(" "),a("el-radio",{attrs:{label:"代理商"}},[e._v("代理商")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"createDate",order:"descending"},data:e.userList,"element-loading-text":"给我一点时间",border:"",fit:""}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"角色",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.vo.roleName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"帐号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.username))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"电话",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.phone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"地址详情",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatAddress")(t.row.address)))]),e._v(" "),a("span",[e._v(e._s(t.row.addressDetail))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.photo||"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.vo.createUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",sortable:"",prop:"createDate",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.createDate,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"到期时间",sortable:"",prop:"expireDate",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.expireDate?[a("span",[e._v(e._s(e._f("parseTime")(t.row.expireDate,"{y}-{m}-{d} {h}:{i}:{s}")))])]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"余额",sortable:"",prop:"balance",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.balance/100))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"二维码库存",sortable:"",prop:"stock",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.vo.stock))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v("正常")])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.current,"page-size":e.listQuery.size,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"current",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增用户",visible:e.dialogFormVisible},on:{close:function(t){e.resetForm("user")},"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.roleLoading,expression:"roleLoading"}],ref:"user",staticStyle:{width:"400px","margin-left":"50px"},attrs:{"status-icon":"",model:e.user,rules:e.rules,size:"small","label-position":"left","label-width":"90px"}},[a("el-form-item",{attrs:{label:"角色",prop:"vo.roleId"}},[a("el-radio-group",{model:{value:e.user.vo.roleId,callback:function(t){e.$set(e.user.vo,"roleId",t)},expression:"user.vo.roleId"}},e._l(e.roleList,function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"帐号",prop:"username"}},[a("el-input",{model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.user.checkPass,callback:function(t){e.$set(e.user,"checkPass",t)},expression:"user.checkPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-cascader",{attrs:{options:e.options},model:{value:e.user.address,callback:function(t){e.$set(e.user,"address",t)},expression:"user.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"街道",prop:"addressDetail"}},[a("el-input",{model:{value:e.user.addressDetail,callback:function(t){e.$set(e.user,"addressDetail",t)},expression:"user.addressDetail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用期限"}},[a("el-radio-group",{on:{change:e.handleRadioChange},model:{value:e.user.expireDate,callback:function(t){e.$set(e.user,"expireDate",t)},expression:"user.expireDate"}},[a("el-radio",{attrs:{label:2592e6}},[e._v("30天试用")]),e._v(" "),a("el-radio",{attrs:{label:31536e6}},[e._v("一年")]),e._v(" "),a("el-radio",[e._v("无")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"余额"}},[a("el-input-number",{attrs:{controls:!1,disabled:""},model:{value:e.user.balance,callback:function(t){e.$set(e.user,"balance",t)},expression:"user.balance"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"二维码库存"}},[a("el-input-number",{attrs:{controls:!1,disabled:""},model:{value:e.user.vo.stock,callback:function(t){e.$set(e.user.vo,"stock",t)},expression:"user.vo.stock"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.createUser}},[e._v("创 建")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(i,u,!1,function(e){a("I1kX")},"data-v-6e6e6d92",null);t.default=c.exports}});