webpackJsonp([15],{E4NG:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.orderDetail-title[data-v-8f7d1418] {\n  font-size: 14px;\n  font-weight: bold;\n  border-top: 1px solid #D1D7DC;\n  margin: 10px 0;\n  padding-top: 10px;\n}\n",""])},QQ0M:function(t,e,a){var i=a("E4NG");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("a559b608",i,!0)},dnmF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("vMJZ"),r=a("cAgV"),n=a("XbCK"),s=a("qsgq"),o=a.n(s),l={directives:{waves:r.a},components:{PayPage:n.a},data:function(){return{loading:!1,total:null,listQuery:{current:1,size:20,condition:{orderNo:"",status:"",vo:{orderFlag:0,activityName:""},createBy:this.$store.getters.userInfo.id}},orederList:[],orderDetail:null,order:null,checkstandLogo:o.a,dialogOrderDetail:!1,dialogPay:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(i.m)(this.listQuery).then(function(e){var a=e.data;0===a.code&&"success"===a.msg&&(t.orederList=a.datas.records,t.total=a.datas.total,t.loading=!1)}).catch(function(e){t.loading=!1})},handleFilter:function(){this.listQuery.current=1,this.getList()},handleSizeChange:function(t){this.listQuery.size=t,this.getList()},handleCurrentChange:function(t){this.listQuery.current=t,this.getList()},handlerRadioChange:function(){this.getList()},openOrderDetail:function(t){this.dialogOrderDetail=!0,this.orderDetail=t},deletOrder:function(t){var e=this;this.$confirm("是否删除订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.f)(t).then(function(t){var a=t.data;0===a.code&&"success"===a.msg&&(e.getList(),e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}))})})},cancelOrder:function(t){var e=this;this.$confirm("是否取消订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.b)(t).then(function(t){var a=t.data;0===a.code&&"success"===a.msg&&(e.getList(),e.$store.dispatch("GetUserInfo").then(function(t){e.$notify({title:"成功",message:"取消成功",type:"success",duration:2e3})}))})}).catch(function(t){})},pay:function(t){this.order=t,this.dialogPay=!0},getPayRes:function(t){"PAY_SUCCESS"===t&&(this.dialogPay=!1,this.getList())},confirmDelivery:function(t,e){var a=this;this.$confirm("确认收货将解锁二维码，是否确认收货?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.c)(t).then(function(t){var i=t.data;0===i.code&&"success"===i.msg&&(a.orederList.splice(e,1,i.data),a.$message({type:"success",message:"操纵成功"}))})}).catch(function(){a.$message({type:"info",message:"已取消收货"})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"订单编号"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.listQuery.condition.orderNo,callback:function(e){t.$set(t.listQuery.condition,"orderNo",e)},expression:"listQuery.condition.orderNo"}}),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"活动名"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.listQuery.condition.vo.activityName,callback:function(e){t.$set(t.listQuery.condition.vo,"activityName",e)},expression:"listQuery.condition.vo.activityName"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),a("div",{staticStyle:{margin:"10px 0"}},[a("el-radio-group",{staticStyle:{"margin-left":"20px"},on:{change:t.handlerRadioChange},model:{value:t.listQuery.condition.status,callback:function(e){t.$set(t.listQuery.condition,"status",e)},expression:"listQuery.condition.status"}},[a("el-radio",{attrs:{label:""}},[t._v("所有订单")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("等待付款")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("待发货")]),t._v(" "),a("el-radio",{attrs:{label:4}},[t._v("待收货")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("关闭的订单")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("成功的订单")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.orederList,"element-loading-text":"给我一点时间",border:"",fit:""}},[a("el-table-column",{attrs:{align:"center",label:"订单编号",prop:"createDate",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.orderNo))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.createDate,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.orderType?"活动创建（"+e.row.vo.activityName+"）":"二维码充值"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{class:{blueBack:4===e.row.status},attrs:{type:t._f("getOrderStatus")(e.row.status,2)}},[t._v("\n          "+t._s(t._f("getOrderStatus")(e.row.status,0)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"二维码数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.vo.qrCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"二维码单价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.vo.qrPrice/100))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"微信手续费"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.wxTransfer?e.row.wxTransfer/100:"无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.orderPrice/100))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){t.pay(e.row)}}},[t._v("立即付款")]):t._e(),t._v(" "),1===e.row.status?a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){t.cancelOrder(e.row.id)}}},[t._v("取消订单")]):t._e(),t._v(" "),0===e.row.status||2===e.row.status?a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){t.deletOrder(e.row.id)}}},[t._v("删除订单")]):t._e(),t._v(" "),4===e.row.status?a("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(a){t.confirmDelivery(e.row.id,e.$index)}}},[t._v("确认收货")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){t.openOrderDetail(e.row)}}},[t._v("订单详情")]),t._v(" "),1===e.row.orderType&&0===e.row.status||4===e.row.status&&0===e.row.isDelivery?a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){t.openLogisticalDetail(e.row)}}},[t._v("物流信息")]):t._e()]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.current,"page-size":t.listQuery.size,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"current",e)}}})],1),t._v(" "),t.orderDetail?a("el-dialog",{attrs:{visible:t.dialogOrderDetail},on:{"update:visible":function(e){t.dialogOrderDetail=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("订单详情")]),t._v(" "),a("el-tag",{class:{blueBack:4===t.orderDetail.status},attrs:{size:"mini",type:t._f("getOrderStatus")(t.orderDetail.status,2)}},[t._v("\n        "+t._s(t._f("getOrderStatus")(t.orderDetail.status,0)))])],1),t._v(" "),0==t.orderDetail.orderType?[a("span",[t._v("二维码收货地址："+t._s(t.orderDetail.vo.deliveryAddress))]),t._v(" "),a("div",{staticClass:"orderDetail-title"},[t._v("活动信息：")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[t._v("活动名："+t._s(t.orderDetail.vo.activityName))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("总二维码数量："+t._s(t.orderDetail.vo.activityTotalQr)+"张")]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("红包总金额：¥"+t._s(t.orderDetail.vo.activityTotalMoney/100))]),t._v(" "),a("el-col",{attrs:{span:24}},[t._v("开始时间："+t._s(t._f("parseTime")(t.orderDetail.vo.activityStartDate,"{y}-{m}-{d} {h}:{i}:{s}")))])],1)]:t._e(),t._v(" "),a("div",{staticClass:"orderDetail-title"},[t._v("创建人信息：")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[t._v("姓名："+t._s(t.orderDetail.vo.createUserName))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("电话："+t._s(t.orderDetail.vo.createUserPhone))])],1),t._v(" "),a("div",{staticClass:"orderDetail-title"},[t._v("订单信息：")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[t._v("订单编号："+t._s(t.orderDetail.orderNo))]),t._v(" "),a("el-col",{attrs:{span:12}},[t._v("创建时间："+t._s(t._f("parseTime")(t.orderDetail.createDate,"{y}-{m}-{d} {h}:{i}:{s}")))]),t._v(" "),1!==t.orderDetail.status?a("el-col",{attrs:{span:12}},[t._v(t._s(0===t.orderDetail.status?"成交时间":" 关闭时间")+"："+t._s(t._f("parseTime")(t.orderDetail.updateDate,"{y}-{m}-{d} {h}:{i}:{s}")))]):t._e(),t._v(" "),a("el-col",{attrs:{span:12}},[t._v("订单总金额：¥"+t._s(t.orderDetail.orderPrice/100))])],1)],2):t._e(),t._v(" "),a("el-dialog",{staticClass:"pay-dialog",attrs:{visible:t.dialogPay},on:{"update:visible":function(e){t.dialogPay=e}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("img",{attrs:{src:t.checkstandLogo}}),t._v(" "),a("span",[t._v("收银台")])]),t._v(" "),t.dialogPay?a("pay-page",{attrs:{order:t.order},on:{payRes:t.getPayRes}}):t._e()],1)],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(t){a("QQ0M")},"data-v-8f7d1418",null);e.default=d.exports}});