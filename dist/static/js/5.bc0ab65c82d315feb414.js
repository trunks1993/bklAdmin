webpackJsonp([5],{"5/Nl":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.advert-container[data-v-2e9ad346] {\n  background: #fff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding-bottom: 100px;\n}\n.advert-container-advertBox[data-v-2e9ad346] {\n    width: 250px;\n    padding: 20px;\n}\n.advert-container-advertBox .articles-label[data-v-2e9ad346] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -webkit-box-pack: justify;\n          -ms-flex-pack: justify;\n              justify-content: space-between;\n}\n.advert-container-advertBox .articles-items[data-v-2e9ad346] {\n      margin: 20px 0;\n}\n.advert-container-advertBox .articles-items-box[data-v-2e9ad346] {\n        -webkit-box-sizing: border-box;\n                box-sizing: border-box;\n        width: 210px;\n        height: 134px;\n        padding: 10px;\n        border: 1px solid #e7e7eb;\n        cursor: pointer;\n        position: relative;\n}\n.advert-container-advertBox .articles-items-box-active[data-v-2e9ad346] {\n          border: 2px solid #43b548 !important;\n}\n.advert-container-advertBox .articles-items-box:hover .articles-items-box-delete[data-v-2e9ad346] {\n          display: block;\n}\n.advert-container-advertBox .articles-items-box-delete[data-v-2e9ad346] {\n          text-align: right;\n          font-size: 30px;\n          padding: 0 10px;\n          height: 38px;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.5);\n          display: none;\n          z-index: 100;\n}\n.advert-container-advertBox .articles-items-box-img[data-v-2e9ad346] {\n          position: relative;\n          width: 100%;\n          height: 100%;\n          background-repeat: no-repeat;\n          background-size: cover;\n          background-position: center center;\n}\n.advert-container-advertBox .articles-items-box-img .isNone[data-v-2e9ad346] {\n            width: 100%;\n            height: 100%;\n            background: #ececec;\n            color: #c0c0c0;\n            font-size: 40px;\n            line-height: 110px;\n            text-align: center;\n}\n.advert-container-advertBox .articles-items-box-img-title[data-v-2e9ad346] {\n            height: 25px;\n            line-height: 25px;\n            font-size: 14px;\n            font-weight: 500;\n            position: absolute;\n            bottom: 0;\n            right: 0;\n            left: 0;\n            background: rgba(0, 0, 0, 0.6);\n            text-align: left;\n            color: #fff;\n            padding: 0 8px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n}\n.advert-container-toolsBox[data-v-2e9ad346] {\n    width: 200px;\n    height: 600px;\n    padding: 20px;\n}\n.advert-container-toolsBox .plugin-items[data-v-2e9ad346] {\n      margin: 20px 0;\n}\n.advert-container-toolsBox .plugin-items-boxbar[data-v-2e9ad346] {\n        margin-bottom: 5px;\n}\n.advert-container .ueditor-line[data-v-2e9ad346] {\n    margin: 15px 90px;\n    border-top: 1px solid #e7e7eb;\n}\n.advert-container .coverPhoto[data-v-2e9ad346] {\n    padding: 0 90px;\n}\n.advert-container .coverPhoto-btn[data-v-2e9ad346] {\n      margin-top: 15px;\n}\n.advert-container-footer[data-v-2e9ad346] {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 2000;\n    border-top: 1px solid #d9dadc;\n}\n.advert-container-footer-toolbar[data-v-2e9ad346] {\n      width: 1200px;\n      margin: auto;\n      text-align: right;\n      padding: 32px 210px 32px 250px;\n      background: #fff;\n}\n.picSelect[data-v-2e9ad346] {\n  text-align: center;\n  border-bottom: 1px solid #e4e8eb;\n  padding-bottom: 20px;\n}\n.picSelect-title[data-v-2e9ad346]:after {\n    content: \"\";\n    display: inline-block;\n    vertical-align: middle;\n    margin: 10px;\n    width: 20px;\n    border-bottom: 1px solid #e4e8eb;\n}\n.imgPanelBox-step1-imgItems[data-v-2e9ad346] {\n  height: 350px;\n  padding-top: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  overflow-y: scroll;\n}\n.imgPanelBox-step1-imgItems-item[data-v-2e9ad346] {\n    display: block;\n    width: 115px;\n    height: 115px;\n    margin: 10px 0 0 10px;\n    border: 1px dashed #e7e7eb;\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-position: center center;\n    position: relative;\n}\n.imgPanelBox-step1-imgItems-item[data-v-2e9ad346]:hover {\n      cursor: pointer;\n}\n.imgPanelBox-step1-noImgItems[data-v-2e9ad346] {\n  line-height: 350px;\n  text-align: center;\n}\n.imgPanelBox-step2[data-v-2e9ad346] {\n  height: 350px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.imgPanel[data-v-2e9ad346] {\n  margin-top: 20px;\n  overflow-y: scroll;\n  height: 350px;\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.imgPanel-item[data-v-2e9ad346] {\n    display: block;\n    width: 115px;\n    height: 115px;\n    margin: 10px 0 0 10px;\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-position: center center;\n    position: relative;\n}\n.imgPanel-item[data-v-2e9ad346]:hover {\n      cursor: pointer;\n}\n.is-select[data-v-2e9ad346]:after {\n  content: ' ';\n  display: inline-block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: url(https://res.wx.qq.com/mpres/htmledition/images/icon/common/icon_card_selected3a7b38.png) no-repeat 0 0;\n  background-position: center center;\n}\n.is-select[data-v-2e9ad346]:before {\n  content: ' ';\n  display: inline-block;\n  position: absolute;\n  background: rgba(0, 0, 0, 0.5);\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n.fixedAdvert[data-v-2e9ad346] {\n  position: fixed;\n  top: 0;\n}\n.fixedTools[data-v-2e9ad346] {\n  position: fixed;\n  top: 0;\n}\n.fixedAdvertTemp[data-v-2e9ad346] {\n  width: 250px;\n  height: 600px;\n  display: none;\n}\n",""])},AyKi:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.editor-slide-upload .el-upload--picture-card {\n  width: 100%!important;\n}\n\n",""])},HBWs:function(t,e,n){var i=n("AyKi");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("4349b675",i,!0)},JYYh:function(t,e,n){"use strict";function i(t){return"string"==typeof t?document.getElementById(t):t}function a(t){if(!i(t.domId)){var e,n,a,r=document.createElement(t.domTag);if(r.id=t.domId,t.content&&(r.innerHTML=t.content),null!=t.otherAttributes)for(var s=0;s<t.otherAttributes.length;s++){var d=t.otherAttributes[s];r.setAttribute(d.attrName,d.attrValue)}if(null!=t.eventRegisters)for(s=0;s<t.eventRegisters.length;s++){var l=t.eventRegisters[s];e=r,n=l.eventType,a=l.eventHandler,e.addEventListener?e.addEventListener(n,a,!1):e.attachEvent?e.attachEvent("on"+n,a):e["on"+n]=a}try{o(t.actionType,t.parentNode,r)}catch(t){}return r}o("remove",t.parentNode,t.domId)}function o(t,e,n){if(e&&(e="string"==typeof e?i(e):e,n="string"==typeof n?i(n):n,e&&n))switch(t){case"insertBefore":e.insertBefore(n,e.children[1]);break;case"appendChild":e.appendChild(n);break;case"remove":e.removeChild(n)}}e.b=i,e.a=function(t,e){var n=!!window.ActiveXObject,o={domId:"editor-titleInput",parentNode:t.container,domTag:"div",actionType:"insertBefore",otherAttributes:[{attrName:"class",attrValue:"editor-titleInput"}]},r={domId:"editor-input-title",parentNode:"editor-titleInput",domTag:"input",actionType:"appendChild",otherAttributes:[{attrName:"class",attrValue:"editor-titleInput-title"},{attrName:"placeholder",attrValue:"请在这里输入标题"},{attrName:"max-length",attrValue:"64"}],eventRegisters:[{eventType:n?"propertychange":"input",eventHandler:function(t){e.$emit("inputTitleAndAuthor",{inputType:0,value:i("editor-input-title").value})}},{eventType:"focus",eventHandler:function(t){e.editor.setDisabled()}}]},s={domId:"editor-authorInput",parentNode:t.container,domTag:"div",actionType:"insertBefore",otherAttributes:[{attrName:"class",attrValue:"editor-authorInput"}]},d={domId:"editor-input-author",parentNode:"editor-authorInput",domTag:"input",actionType:"appendChild",otherAttributes:[{attrName:"class",attrValue:"editor-authorInput-author"},{attrName:"placeholder",attrValue:"请输入作者"},{attrName:"max-length",attrValue:"8"}],eventRegisters:[{eventType:n?"propertychange":"input",eventHandler:function(t){e.$emit("inputTitleAndAuthor",{inputType:1,value:i("editor-input-author").value})}},{eventType:"focus",eventHandler:function(t){e.editor.setDisabled()}}]},l={domId:"editor-line",parentNode:t.container,domTag:"div",actionType:"insertBefore",otherAttributes:[{attrName:"class",attrValue:"editor-line"}]},c={domId:"editor-fixedTemp",parentNode:t.container,domTag:"div",actionType:"insertBefore"};a(l),a(s),a(d),a(o),a(r),a(c),document.onscroll=function(){var n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;"/advert/index"===e.$route.path&&(n>91?(UE.dom.domUtils.addClass(t.container.children[0],"fixedToolBar"),i("editor-fixedTemp").setAttribute("style","height: 117px"),UE.dom.domUtils.addClass(i("advert-container-advertBox"),"fixedAdvert"),i("fixedAdvertTemp").setAttribute("style","display: block"),UE.dom.domUtils.addClass(i("advert-container-toolsBox"),"fixedTools"),i("advert-container-toolsBox").setAttribute("style","left:"+(function(t){if(!(t="string"==typeof t?i(t):t))return;var e="";if(t.getBoundingClientRect)return{x:(e=t.getBoundingClientRect()).left,y:e.top};if(document.getBoxObjectFor)return{x:(e=document.getBoxObjectFor(t)).x,y:e.y};e={x:t.offsetLeft,y:t.offsetTop};for(var n=t.offsetParent;n;)e.x+=t.offsetLeft,e.y+=t.offsetTop,n=t.offsetParent;return e}(t.container).x+750)+"px")):(UE.dom.domUtils.removeClasses(t.container.children[0],"fixedToolBar"),i("editor-fixedTemp").setAttribute("style","height: 0"),UE.dom.domUtils.removeClasses(i("advert-container-advertBox"),"fixedAdvert"),i("fixedAdvertTemp").setAttribute("style","display: none"),UE.dom.domUtils.removeClasses(i("advert-container-toolsBox"),"fixedTools")))}}},RRLH:function(t,e,n){var i=n("5/Nl");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("6af53491",i,!0)},cJeT:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.fixedToolBar {\n  width: 748px !important;\n  z-index: 1000;\n  position: fixed !important;\n  top: 0;\n  -webkit-box-shadow: 0 1px 3px #f8f8f8;\n          box-shadow: 0 1px 3px #f8f8f8;\n}\n.editor-input {\n  margin: 20px 0 15px;\n  padding: 0 90px;\n}\n.editor-input-title {\n    outline: none;\n    width: 100%;\n    margin: 4px 0;\n    font-size: 22px;\n    height: 46px;\n    line-height: 46px;\n    font-weight: 400;\n    border: 0;\n}\n.editor-input-title::-webkit-input-placeholder {\n      color: #999;\n      font-size: 22px;\n}\n.editor-titleInput {\n  margin: 20px 0 15px;\n  padding: 0 90px;\n}\n.editor-titleInput-title {\n    color: #222;\n    outline: none;\n    width: 100%;\n    margin: 4px 0;\n    font-size: 22px;\n    height: 46px;\n    line-height: 46px;\n    font-weight: 400;\n    border: 0;\n}\n.editor-titleInput-title::-webkit-input-placeholder {\n      color: #999;\n      font-size: 22px;\n}\n.editor-authorInput {\n  margin: 15px 0 10px;\n  padding: 0 90px 10px;\n}\n.editor-authorInput-author {\n    color: #222;\n    outline: none;\n    width: 100%;\n    height: 22px;\n    margin: 4px 0;\n    border: 0;\n}\n.editor-authorInput-author::-webkit-input-placeholder {\n      color: #999;\n}\n.editor-line {\n  border-top: 1px solid #e7e7eb;\n  margin: 0 90px;\n  margin-bottom: 15px;\n}\n",""])},h3OX:function(t,e,n){var i=n("cJeT");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("b620355a",i,!0)},iYDh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),a=n.n(i),o=n("JYYh"),r={toolbars:[["undo","redo","|","fontsize","|","blockquote","horizontal","|","removeformat","formatmatch","|","link","unlink"],["bold","italic","underline","forecolor","backcolor","|","indent","justifyleft","justifycenter","justifyright","justifyjustify","rowspacingtop","rowspacingbottom","lineheight","insertorderedlist","insertunorderedlist"]],labelMap:{undo:"显示提示信息"}},s={props:{value:{type:String,default:""},title:{type:String,default:""},author:{type:String,default:""},hasChange:{type:Boolean,default:!1,required:!0}},data:function(){return{editor:null,id:"ueditor-"+ +new Date}},mounted:function(){var t=this;this.$nextTick(function(){t.$refs.editor.id=t.id,t.editor=UE.getEditor(t.id,r),t.editor.ready(function(){Object(o.a)(this.editor,this),this.editor.addListener("contentChange",function(){var t=this.editor.getContent();this.$emit("input",t)}.bind(this)),this.$emit("ready",this.editor)}.bind(t))})},watch:{value:function(t,e){this.hasChange||(this.editor=UE.getEditor(this.id,r),this.editor.setContent(t||""),this.$emit("selectChange"))},title:function(t,e){Object(o.b)("editor-input-title").value=t},author:function(t,e){Object(o.b)("editor-input-author").value=t}},destroyed:function(){this.editor.destroy()}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"editor"})},staticRenderFns:[]};var l=n("VU/8")(s,d,!1,function(t){n("h3OX")},null,null).exports,c=n("//Fk"),p=n.n(c),u=n("fZjL"),v=n.n(u),h={name:"editorSlideUpload",props:{color:{type:String,default:"#20a0ff"}},data:function(){return{uploadUrl:"https://www.ijnkj.com/bkl/api/upload/uploadImg/"+this.$store.getters.userInfo.id,dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return v()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=v()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var n=e.uid,i=v()(this.listObj),a=0,o=i.length;a<o;a++)if(this.listObj[i[a]].uid===n)return this.listObj[i[a]].url=t.data,void(this.listObj[i[a]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,n=v()(this.listObj),i=0,a=n.length;i<a;i++)if(this.listObj[n[i]].uid===e)return void delete this.listObj[n[i]]},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new p.a(function(a,o){var r=new Image;r.src=n.createObjectURL(t),r.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},a(!0)})}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:t.color,borderColor:t.color,"border-radius":0,width:"100%"},attrs:{icon:"upload",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{action:t.uploadUrl,"file-list":t.fileList,"show-file-list":!0,"list-type":"picture-card","on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=n("VU/8")(h,g,!1,function(t){n("HBWs")},null,null).exports,m={props:{color:{type:String,default:"#20a0ff"}},methods:{addTicket:function(){this.$emit("addTicket")}}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-button",{style:{"border-radius":0,width:"100%",background:this.color},attrs:{type:"primary"},on:{click:this.addTicket}},[this._v("添加优惠券")])],1)},staticRenderFns:[]},b=n("VU/8")(m,x,!1,null,null,null).exports,y=n("NYxO"),w=n("LvLB"),k=n("vMJZ"),C={components:{Ueditor:l,EditorImage:f,Ticket:b},data:function(){return{editor:null,articleLoading:!1,saveLoading:!1,baseUrl:"https://www.ijnkj.com/bkl",dialogAdvertPic:!1,step:1,total:0,listQuery:{size:3,current:1,condition:{type:0,user:this.$store.getters.userInfo.id}},advertList:[],imgList:[],selectedAdvertPhoto:"",advert:{title:"",author:"",content:""},croppa:null,hasChange:!1}},computed:a()({},Object(y.b)(["sidebar"])),methods:{getList:function(){var t=this;this.articleLoading=!0,Object(w.c)(this.listQuery).then(function(e){var n=e.data;0===n.code&&"success"===n.msg&&(t.advertList=n.datas.records.length>0?n.datas.records:[{id:"",user:t.$store.getters.userInfo.id,title:"",author:"",content:"",advertPic:"",type:0}],t.selectAdvert(n.datas.records[0]),t.total=n.datas.total,t.articleLoading=!1)}).catch(function(e){t.articleLoading=!1})},selectAdvert:function(t,e){this.hasChange=!1,this.advert=_.clone(t)||{id:"",user:this.$store.getters.userInfo.id,title:"",author:"",content:"",advertPic:"",type:0}},handleAdd:function(){if(""!==this.advertList[0].id){var t={id:"",user:this.$store.getters.userInfo.id,title:"",author:"",content:"",advertPic:"",type:0};this.advertList.unshift(t),this.selectAdvert(t)}else this.$message({message:"您有未保存的新软文",type:"warning"})},saveAdvert:function(){var t=this;!this.advert.title||this.advert.title.length>64||!this.editor.hasContents()||this.advert.author&&this.advert.author.length>8?this.$message.error("标题，正文不能为空，且标题不能超过64个字，作者不超过8个字"):(this.saveLoading=!0,Object(w.d)(this.advert).then(function(e){var n=e.data;0===n.code&&"success"===n.msg?(t.$notify({title:"成功",message:"保存成功",type:"success"}),t.getList()):t.$message.error("保存失败"),t.saveLoading=!1}).catch(function(e){t.$message.error("保存失败"),t.saveLoading=!1}))},deleteAdvert:function(t){var e=this;this.$confirm("此操作将永久删除该图文, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.advertList[t].id?Object(w.a)(e.advertList[t].id).then(function(t){var n=t.data;0===n.code&&"success"===n.msg?(e.$message({type:"success",message:"删除成功!"}),e.getList()):e.$message.error("删除失败")}).catch(function(t){e.$message.error("删除失败")}):(e.advertList.splice(t,1),e.$nextTick(function(){e.selectAdvert(e.advertList[t]||{id:"",user:e.$store.getters.userInfo.id,title:"",author:"",content:"",advertPic:"",type:0})}),e.$message({type:"success",message:"删除成功!"}))}).catch(function(){})},selectAdvertPhoto:function(t){t===this.selectedAdvertPhoto?this.selectedAdvertPhoto="":this.selectedAdvertPhoto=t},sureSelectedAdvertPhoto:function(){var t=this;this.dialogAdvertPic=!1,this.croppa.generateBlob(function(e){var n=new FormData;n.append("file",e),n.append("userId",t.$store.getters.userInfo.id),Object(k.z)(n).then(function(e){t.advert.advertPic=e.data.data})},"image/jpeg",.8)},handleCurrentChange:function(){this.getList()},ueditorReady:function(t){this.editor=t,UE.dom.domUtils.on(this.editor.body,"click",function(e){t.setEnabled()}),this.getList()},inputTitleAndAuthor:function(t){t.inputType?this.advert.author=t.value:this.advert.title=t.value},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){e.editor.execCommand("inserthtml",'<img style="max-width:100%;max-height:'+570/(t.width/t.height)+'px;" src="https://www.ijnkj.com/bkl'+t.url+'" >')})},addTicket:function(){this.$message({type:"warning",message:"暂未上线"})},getContentImg:function(){this.imgList=this.editor.body.getElementsByTagName("img"),this.dialogAdvertPic=!0}}},A={render:function(){var t=this,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"advert-container"},[i("div",{staticClass:"advert-container-advertBox",attrs:{id:"advert-container-advertBox"}},[i("div",{staticClass:"articles"},[i("div",{staticClass:"articles-label"},[i("label",[e._v("图文列表")]),e._v(" "),i("el-button",{style:{"border-radius":0},attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline"},on:{click:e.handleAdd}},[e._v("新建图文")])],1),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.articleLoading,expression:"articleLoading"}],staticClass:"articles-items"},e._l(e.advertList,function(t,n){return i("div",{staticClass:"articles-items-box",class:{"articles-items-box-active":t.id===e.advert.id},on:{click:function(i){e.selectAdvert(t,n)}}},[i("div",{staticClass:"articles-items-box-img",style:{"background-image":"url('"+e.baseUrl+t.advertPic+"')"}},[t.advertPic?e._e():i("div",{staticClass:"isNone"},[i("i",{staticClass:"el-icon-picture"})]),e._v(" "),i("div",{staticClass:"articles-items-box-img-title"},[e._v(e._s(t.title||"标题"))])]),e._v(" "),1!==e.advertList.length||""!==e.advertList[0].id?i("div",{staticClass:"articles-items-box-delete"},[i("svg-icon",{attrs:{"icon-class":"delete"},nativeOn:{click:function(t){e.deleteAdvert(n)}}})],1):e._e()])})),e._v(" "),e.advertList.length>0?i("div",[i("el-pagination",{attrs:{small:"","page-size":e.listQuery.size,"current-page":e.listQuery.current,layout:"prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.$set(e.listQuery,"current",t)},"current-change":e.handleCurrentChange}})],1):e._e()])]),e._v(" "),i("div",{staticClass:"fixedAdvertTemp",attrs:{id:"fixedAdvertTemp"}}),e._v(" "),i("div",[i("ueditor",{staticClass:"ueditor",attrs:{title:e.advert.title,author:e.advert.author,hasChange:e.hasChange},on:{inputTitleAndAuthor:e.inputTitleAndAuthor,ready:e.ueditorReady,selectChange:function(){t.hasChange=!0}},model:{value:e.advert.content,callback:function(t){e.$set(e.advert,"content",t)},expression:"advert.content"}}),e._v(" "),i("div",{staticClass:"ueditor-line"}),e._v(" "),i("div",{staticClass:"coverPhoto"},[i("div",{staticClass:"coverPhoto-label"},[e._v("\n        上传封面\n      ")]),e._v(" "),i("div",{staticClass:"coverPhoto-btn"},[i("el-button",{style:{"border-radius":0},attrs:{type:"info",plain:"",size:"small"},on:{click:e.getContentImg}},[e._v("从正文中选择")]),e._v(" "),i("el-button",{style:{"border-radius":0},attrs:{type:"info",plain:"",size:"small"}},[e._v("从图片库选择")])],1),e._v(" "),e.advert.advertPic?i("img",{staticStyle:{width:"100px",height:"100px","margin-top":"10px"},attrs:{src:e.baseUrl+e.advert.advertPic}}):e._e()])],1),e._v(" "),i("div",{staticClass:"advert-container-toolsBox",attrs:{id:"advert-container-toolsBox"}},[i("div",{staticClass:"plugin"},[e._m(0),e._v(" "),i("div",{staticClass:"plugin-items"},[i("div",{staticClass:"plugin-items-boxbar"},[i("EditorImage",{on:{successCBK:e.imageSuccessCBK}})],1),e._v(" "),i("div",{staticClass:"plugin-items-boxbar"},[i("Ticket",{on:{addTicket:e.addTicket}})],1)])])]),e._v(" "),i("div",{staticClass:"advert-container-footer"},[i("div",{staticClass:"advert-container-footer-toolbar"},[i("el-button",{style:{"border-radius":0,padding:"8px 30px"},attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveAdvert}},[e._v("保 存")]),e._v(" "),i("el-button",{style:{"border-radius":0,padding:"8px 30px"},attrs:{type:"info",plain:""}},[e._v("预 览")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"选择封面",visible:e.dialogAdvertPic},on:{"update:visible":function(t){e.dialogAdvertPic=t},close:function(){t.step=1,t.selectedAdvertPhoto=""}}},[i("div",{staticClass:"picSelect"},[i("span",{staticClass:"picSelect-title",style:1===e.step?"color:#4fc08d":""},[e._v("1 从正文选择封面")]),e._v(" "),i("span",{style:2===e.step?"color:#4fc08d":""},[e._v("2 裁切封面")])]),e._v(" "),i("div",{staticClass:"imgPanelBox"},[1===e.step?i("div",{staticClass:"imgPanelBox-step1"},[e.imgList.length>0?i("div",{staticClass:"imgPanelBox-step1-imgItems"},e._l(e.imgList,function(t){return i("span",{staticClass:"imgPanelBox-step1-imgItems-item",class:{"is-select":e.selectedAdvertPhoto===t.src},style:{"background-image":"url('"+t.src+"')"},on:{click:function(n){e.selectAdvertPhoto(t.src)}}})})):i("div",{staticClass:"imgPanelBox-step1-noImgItems"},[i("span",[e._v("正文中无可用做封面的图片")])])]):e._e(),e._v(" "),2===e.step?i("div",{staticClass:"imgPanelBox-step2"},[i("croppa",{attrs:{placeholder:"选择图片","placeholder-font-size":25,"show-remove-button":!1,"disable-click-to-choose":!0,"initial-image":e.selectedAdvertPhoto,"canvas-color":"transparent"},model:{value:e.croppa,callback:function(t){e.croppa=t},expression:"croppa"}})],1):e._e()]),e._v(" "),i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[1===e.step?i("el-button",{style:{"border-radius":0,padding:"8px 25px"},attrs:{type:"primary",disabled:""===e.selectedAdvertPhoto},on:{click:function(){t.step=2}}},[e._v("下一步")]):e._e(),e._v(" "),2===e.step?i("el-button",{style:{"border-radius":0,padding:"8px 25px"},attrs:{type:"info",disabled:""===e.selectedAdvertPhoto},on:{click:function(){t.step=1}}},[e._v("上一步")]):e._e(),e._v(" "),2===e.step?i("el-button",{style:{"border-radius":0,padding:"8px 30px"},attrs:{type:"primary",disabled:""===e.selectedAdvertPhoto},on:{click:e.sureSelectedAdvertPhoto}},[e._v("完 成")]):e._e()],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"plugin-label"},[e("label",[this._v("多媒体")])])}]};var T=n("VU/8")(C,A,!1,function(t){n("RRLH")},"data-v-2e9ad346",null);e.default=T.exports}});